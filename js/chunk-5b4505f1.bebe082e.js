(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b4505f1"],{"1dde":function(t,s,e){var i=e("d039"),n=e("b622"),a=e("2d00"),o=n("species");t.exports=function(t){return a>=51||!i((function(){var s=[],e=s.constructor={};return e[o]=function(){return{foo:1}},1!==s[t](Boolean).foo}))}},2040:function(t,s,e){"use strict";var i=e("c7ef"),n=e.n(i);n.a},"4c41":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper"},[e("Layout",[t.isLogined&&t.isEntranceVi?e("div",[e("span",[t._v(" 你好，"+t._s(t.userId)+" ")]),e("div",{on:{click:t.handleSetting}},[e("router-link",{attrs:{to:"change_psw"}},[e("span",{on:{click:t.changePsw}},[t._v("修改密码")])])],1),e("div",[e("span",{on:{click:t.logout}},[t._v(" 退出登录 ")])])]):t._e(),t.isEntranceVi&&!t.isLogined?e("form",{staticClass:"login-form"},[e("div",{staticClass:"login-input"},[e("span",{staticClass:"login-icon"},[e("Icon",{attrs:{name:"login"}})],1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.userId,expression:"userId"}],attrs:{type:"text",placeholder:t.inputPlaceholder},domProps:{value:t.userId},on:{input:function(s){s.target.composing||(t.userId=s.target.value)}}})]),e("div",{staticClass:"login-input"},[e("span",{staticClass:"login-icon"},[e("Icon",{attrs:{name:"password"}})],1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.userPassword,expression:"userPassword"}],attrs:{type:"password",placeholder:t.inputPswPlaceholder},domProps:{value:t.userPassword},on:{input:function(s){s.target.composing||(t.userPassword=s.target.value)}}})]),t.isBtnRegister?e("div",{staticClass:"login-input"},[e("span",{staticClass:"login-icon"},[e("Icon",{attrs:{name:"psw2"}})],1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPsw,expression:"confirmPsw"}],attrs:{type:"password",placeholder:"确认密码"},domProps:{value:t.confirmPsw},on:{input:function(s){s.target.composing||(t.confirmPsw=s.target.value)}}})]):t._e(),e("div",{staticClass:"oper"},[e("div",{staticClass:"login-btn",on:{click:t.handleLogin}},[e("span",[t._v(t._s(!0===t.isUseMsgLogin?"发送验证码":!0===t.isBtnRegister?"注册":"登录"))])])]),e("span",{staticClass:"mobile-msg-login",on:{click:t.handleShift}},[t._v(" "+t._s(!1===t.isUseMsgLogin?"手机验证码登录":"账号密码登录")+" ")]),e("span",{staticClass:"register-text",on:{click:t.handleRegister}},[t._v(" "+t._s(!0===t.isBtnRegister?"登录":"注册")+" ")])]):t._e(),t.isEntranceVi?e("div",{staticClass:"settings",on:{click:t.handleSetting}},[e("router-link",{attrs:{to:"/my/outcome_setting"}},[e("div",{staticClass:"outcome-tag-setting"},[t._v("支出分类标签管理")])]),e("router-link",{attrs:{to:"/my/income_setting"}},[e("div",[t._v("收入分类标签管理")])]),e("router-link",{attrs:{to:"/my/budget_setting"}},[e("div",[t._v("预算管理")])]),e("router-link",{attrs:{to:"/my/currency_setting"}},[e("div",[t._v("币种管理")])])],1):t._e(),e("router-view")],1)],1)},n=[],a=(e("fb6a"),e("d3b7"),e("d4ec")),o=e("bee2"),r=e("262e"),c=e("2caf"),u=e("9ab4"),l=e("2b0e"),d=e("60a3"),g=e("ebad"),h=e("cdae"),p=e("bc3a"),v=e.n(p),f=e("f64c"),w=function(t){Object(r["a"])(e,t);var s=Object(c["a"])(e);function e(){var t;return Object(a["a"])(this,e),t=s.apply(this,arguments),t.userId="",t.isUseMsgLogin=!1,t.userPassword="",t.isEntranceVi=!0,t.inputPlaceholder="请输入账号",t.inputPswPlaceholder="请输入密码",t.isBtnRegister=!1,t.isLogined=t.$store.state.isLogined,t.confirmPsw="",t.isChangePsw=!1,t.oldPsw="",t.newPsw="",t.confirmNewPsw="",t}return Object(o["a"])(e,[{key:"handleLogin",value:function(){var t=this;console.log({userPassword:this.userPassword,userId:this.userId}),v.a.interceptors.request.use((function(t){var s=localStorage.getItem("token");return s&&(s=JSON.parse(s),t.headers.Authorization=s),t}),(function(t){return Promise.reject(t)})),!0===this.isBtnRegister?this.doRegister():v.a.post("http://localhost:3000/api/user/login",{password:this.userPassword,userName:this.userId,useMsg:!1,verificationCode:""}).then((function(s){var e;"0"===s.data.code?(localStorage.setItem("token",JSON.stringify(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.data)),f["a"].success("登录成功"),t.isLogined=!0,t.$store.commit("changeLoginState"),t.$store.commit("updateUserId",t.userId),v.a.post("http://localhost:3000/getAccountBook",{}),t.$store.dispatch("getSettings",t.userId).then((function(){}))):f["a"].warning(s.data.msg||"登录失败")}))}},{key:"doRegister",value:function(){var t=this;""===this.userId?f["a"].warn("请输入账号"):""===this.userPassword?f["a"].warn("请输入密码"):""===this.confirmPsw?f["a"].warn("请确认密码"):this.userPassword!==this.confirmPsw?f["a"].warn("两次输入密码不一致"):v.a.post("http://localhost:3000/api/user/register",{userName:this.userId,password:this.userPassword,useMsg:this.isUseMsgLogin}).then((function(s){0===s.data.code?(f["a"].success(s.data.msg||"注册成功"),t.isBtnRegister=!1,t.userPassword="",t.userId="",t.confirmPsw=""):f["a"].warn(s.data.msg||"注册失败")})).catch((function(t){console.warn(t)}))}},{key:"changePsw",value:function(){this.isChangePsw=!0}},{key:"logout",value:function(){localStorage.removeItem("token"),this.isLogined=!1,this.$store.commit("changeLoginState"),this.userId="",this.userPassword="",this.confirmPsw=""}},{key:"handleShift",value:function(){this.isUseMsgLogin=!this.isUseMsgLogin,this.isBtnRegister=!1,!0===this.isUseMsgLogin?(this.inputPlaceholder="请输入手机号",this.inputPswPlaceholder="请输入验证码"):(this.inputPlaceholder="请输入账号",this.inputPswPlaceholder="请输入密码")}},{key:"handleRegister",value:function(){this.isBtnRegister=!this.isBtnRegister,this.isUseMsgLogin=!1}},{key:"handleSetting",value:function(){this.isEntranceVi=!1}},{key:"mounted",value:function(){var t=this;window.addEventListener("hashchange",(function(){var s=window.location.hash.slice(1);console.log("-----"),t.isEntranceVi="/my"===s}),!1),v.a.post("http://localhost:3000/api/account/fetch/settings",{useId:"001"})}}]),e}(l["a"]);w=Object(u["a"])([Object(d["a"])({components:{Layout:g["a"],Icon:h["a"]}})],w);var m=w,P=m,b=(e("2040"),e("2877")),y=Object(b["a"])(P,i,n,!1,null,"ff13541c",null);s["default"]=y.exports},8418:function(t,s,e){"use strict";var i=e("c04e"),n=e("9bf2"),a=e("5c6c");t.exports=function(t,s,e){var o=i(s);o in t?n.f(t,o,a(0,e)):t[o]=e}},aeaa:function(t,s,e){},c7ef:function(t,s,e){},ebad:function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"content"},[t._t("default")],2),e("Nav")],1)},n=[],a={name:"Layout"},o=a,r=(e("f7f3"),e("2877")),c=Object(r["a"])(o,i,n,!1,null,"26b75354",null);s["a"]=c.exports},f7f3:function(t,s,e){"use strict";var i=e("aeaa"),n=e.n(i);n.a},fb6a:function(t,s,e){"use strict";var i=e("23e7"),n=e("861d"),a=e("e8b5"),o=e("23cb"),r=e("50c4"),c=e("fc6a"),u=e("8418"),l=e("b622"),d=e("1dde"),g=e("ae40"),h=d("slice"),p=g("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),f=[].slice,w=Math.max;i({target:"Array",proto:!0,forced:!h||!p},{slice:function(t,s){var e,i,l,d=c(this),g=r(d.length),h=o(t,g),p=o(void 0===s?g:s,g);if(a(d)&&(e=d.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)?n(e)&&(e=e[v],null===e&&(e=void 0)):e=void 0,e===Array||void 0===e))return f.call(d,h,p);for(i=new(void 0===e?Array:e)(w(p-h,0)),l=0;h<p;h++,l++)h in d&&u(i,l,d[h]);return i.length=l,i}})}}]);
//# sourceMappingURL=chunk-5b4505f1.bebe082e.js.map